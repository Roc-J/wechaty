{"version":3,"file":"brolog.es6.umd.js","sources":["../dist/brolog.js"],"sourcesContent":["/*!\n * Brolog JavaScript Library v1.1.0\n * https://github.com/zixia/brolog\n *\n * Copyright Huan LI <zixia@zixia.net>\n * Released under the ISC license\n * https://github.com/zixia/brolog/blob/master/LICENSE\n *\n * Date: 2016-07\n */\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"silent\"] = 0] = \"silent\";\n    LogLevel[LogLevel[\"error\"] = 1] = \"error\";\n    LogLevel[LogLevel[\"warn\"] = 2] = \"warn\";\n    LogLevel[LogLevel[\"info\"] = 3] = \"info\";\n    LogLevel[LogLevel[\"verbose\"] = 4] = \"verbose\";\n    LogLevel[LogLevel[\"silly\"] = 5] = \"silly\";\n})(LogLevel || (LogLevel = {}));\nexport const nullLogger = {\n    error() { },\n    warn() { },\n    info() { },\n    verbose() { },\n    silly() { },\n};\nexport class Brolog {\n    constructor() {\n        this.logLevel = LogLevel.info;\n        this.prefixFilter = /.*/; // Match all by default\n        const instance = Brolog.instance();\n        if (instance) {\n            // set level/prefix of this instance\n            // default to the global instance\n            this.level(instance.level());\n            this.prefix(instance.prefix());\n        }\n    }\n    /**\n     * Create a global Brolog Instance for sharing between modules\n     */\n    static instance(levelName, prefix) {\n        if (levelName) {\n            Brolog.level(levelName);\n        }\n        if (prefix) {\n            Brolog.prefix(prefix);\n        }\n        return globalBrolog;\n    }\n    static enableLogging(log) {\n        Brolog.instance().verbose('Brolog', 'enableLogging(%s)', log);\n        if (log === false) {\n            Brolog.instance().silly('Brolog', 'enableLogging() disabled');\n            return nullLogger;\n        }\n        else if (log === true) {\n            Brolog.instance().silly('Brolog', 'enableLogging() enabled: using blobal Brolog instance');\n            return Brolog.instance();\n        }\n        else if (typeof log.verbose === 'function') {\n            Brolog.instance().silly('Brolog', 'enableLogging() enabled: using provided logger');\n            return log;\n        }\n        throw new Error('got invalid logger');\n    }\n    static prefix(filter) {\n        return Brolog.instance().prefix(filter);\n    }\n    prefix(filter) {\n        if (filter) {\n            if (typeof filter === 'string') {\n                this.prefixFilter = new RegExp(filter, 'i');\n            }\n            else if (filter instanceof RegExp) {\n                this.prefixFilter = filter;\n            }\n            else {\n                throw new Error('unsupported prefix filter');\n            }\n        }\n        return this.prefixFilter;\n    }\n    static level(levelName) {\n        return Brolog.instance().level(levelName);\n    }\n    level(levelName) {\n        if (levelName) {\n            // console.log('levelName: ' + levelName)\n            // http://stackoverflow.com/a/21294925/1123955\n            // XXX: fix the any here?\n            const logLevel = LogLevel[levelName.toLowerCase()];\n            if (logLevel === undefined) {\n                // console.log(logLevel)\n                // console.log(LogLevel)\n                throw new Error('level name error');\n            }\n            this.logLevel = logLevel;\n        }\n        return LogLevel[this.logLevel];\n    }\n    // private log(levelTitle: LevelTitle, prefix: string, message: string) { return Brolog.log(levelTitle, prefix, message) }\n    log(levelTitle, prefix, message) {\n        if (!this.prefixFilter.test(prefix)) {\n            return; // skip message not match prefix filter\n        }\n        const args = Array.prototype.slice.call(arguments, 3) || [];\n        args.unshift(Brolog.timestamp() + ' ' + levelTitle + ' ' + prefix + ' ' + (message || ''));\n        switch (levelTitle) {\n            case 'ERR':\n                console.error.apply(console, args);\n                break;\n            case 'WARN':\n                console.warn.apply(console, args);\n                break;\n            case 'INFO':\n                console.info.apply(console, args);\n                break;\n            default:\n            case 'VERB':\n            case 'SILL':\n                console.log.apply(console, args);\n        }\n    }\n    static error(prefix, ...args) {\n        const instance = Brolog.instance();\n        return instance.error.apply(instance, arguments);\n    }\n    error(prefix, ...args) {\n        if (this.logLevel < LogLevel.error) {\n            return;\n        }\n        const argList = Array.prototype.slice.call(arguments);\n        argList.unshift('ERR');\n        this.log.apply(this, argList);\n    }\n    static warn(prefix, ...args) {\n        const instance = Brolog.instance();\n        return instance.warn.apply(instance, arguments);\n    }\n    warn(prefix, ...args) {\n        if (this.logLevel < LogLevel.warn) {\n            return;\n        }\n        const argList = Array.prototype.slice.call(arguments);\n        argList.unshift('WARN');\n        this.log.apply(this, argList);\n    }\n    static info(prefix, ...args) {\n        const instance = Brolog.instance();\n        return instance.info.apply(instance, arguments);\n    }\n    info(prefix, ...args) {\n        if (this.logLevel < LogLevel.info) {\n            return;\n        }\n        const argList = Array.prototype.slice.call(arguments);\n        argList.unshift('INFO');\n        this.log.apply(this, argList);\n    }\n    static verbose(prefix, ...args) {\n        const instance = Brolog.instance();\n        return instance.verbose.apply(instance, arguments);\n    }\n    verbose(prefix, ...args) {\n        if (this.logLevel < LogLevel.verbose) {\n            return;\n        }\n        const argList = Array.prototype.slice.call(arguments);\n        argList.unshift('VERB');\n        this.log.apply(this, argList);\n    }\n    static silly(prefix, ...args) {\n        const instance = Brolog.instance();\n        return instance.silly.apply(instance, arguments);\n    }\n    silly(prefix, ...args) {\n        if (this.logLevel < LogLevel.silly) {\n            return;\n        }\n        const argList = Array.prototype.slice.call(arguments);\n        argList.unshift('SILL');\n        this.log.apply(this, argList);\n    }\n    static timestamp() {\n        const date = new Date();\n        const hour = date.getHours();\n        const min = date.getMinutes();\n        const sec = date.getSeconds();\n        let stampStr = '';\n        stampStr += (hour < 10) ? ('0' + hour) : hour;\n        stampStr += ':';\n        stampStr += (min < 10) ? ('0' + min) : min;\n        stampStr += ':';\n        stampStr += (sec < 10) ? ('0' + sec) : sec;\n        return stampStr;\n    }\n}\nexport const globalBrolog = new Brolog();\nexport { globalBrolog as log };\nexport default globalBrolog;\n//# sourceMappingURL=brolog.js.map"],"names":[],"mappings":";;;;;;;AAAA;;;;;;;;;;AAUA,IAAI,QAAQ,CAAC;AACb,CAAC,UAAU,QAAQ,EAAE;IACjB,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC;IAC5C,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC;IAC1C,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC;IACxC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC;IACxC,QAAQ,CAAC,QAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC;IAC9C,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC;CAC7C,EAAE,QAAQ,KAAK,QAAQ,GAAG,EAAE,CAAC,CAAC,CAAC;AAChC,AAAO,MAAM,UAAU,GAAG;IACtB,KAAK,GAAG,GAAG;IACX,IAAI,GAAG,GAAG;IACV,IAAI,GAAG,GAAG;IACV,OAAO,GAAG,GAAG;IACb,KAAK,GAAG,GAAG;CACd,CAAC;AACF,AAAO,MAAM,MAAM,CAAC;IAChB,WAAW,GAAG;QACV,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC;QAC9B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,MAAM,QAAQ,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;QACnC,IAAI,QAAQ,EAAE;;;YAGV,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC;YAC7B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC;SAClC;KACJ;;;;IAID,OAAO,QAAQ,CAAC,SAAS,EAAE,MAAM,EAAE;QAC/B,IAAI,SAAS,EAAE;YACX,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;SAC3B;QACD,IAAI,MAAM,EAAE;YACR,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;SACzB;QACD,OAAO,YAAY,CAAC;KACvB;IACD,OAAO,aAAa,CAAC,GAAG,EAAE;QACtB,MAAM,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,QAAQ,EAAE,mBAAmB,EAAE,GAAG,CAAC,CAAC;QAC9D,IAAI,GAAG,KAAK,KAAK,EAAE;YACf,MAAM,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,QAAQ,EAAE,0BAA0B,CAAC,CAAC;YAC9D,OAAO,UAAU,CAAC;SACrB;aACI,IAAI,GAAG,KAAK,IAAI,EAAE;YACnB,MAAM,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,QAAQ,EAAE,uDAAuD,CAAC,CAAC;YAC3F,OAAO,MAAM,CAAC,QAAQ,EAAE,CAAC;SAC5B;aACI,IAAI,OAAO,GAAG,CAAC,OAAO,KAAK,UAAU,EAAE;YACxC,MAAM,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,QAAQ,EAAE,gDAAgD,CAAC,CAAC;YACpF,OAAO,GAAG,CAAC;SACd;QACD,MAAM,IAAI,KAAK,CAAC,oBAAoB,CAAC,CAAC;KACzC;IACD,OAAO,MAAM,CAAC,MAAM,EAAE;QAClB,OAAO,MAAM,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;KAC3C;IACD,MAAM,CAAC,MAAM,EAAE;QACX,IAAI,MAAM,EAAE;YACR,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;gBAC5B,IAAI,CAAC,YAAY,GAAG,IAAI,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;aAC/C;iBACI,IAAI,MAAM,YAAY,MAAM,EAAE;gBAC/B,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC;aAC9B;iBACI;gBACD,MAAM,IAAI,KAAK,CAAC,2BAA2B,CAAC,CAAC;aAChD;SACJ;QACD,OAAO,IAAI,CAAC,YAAY,CAAC;KAC5B;IACD,OAAO,KAAK,CAAC,SAAS,EAAE;QACpB,OAAO,MAAM,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;KAC7C;IACD,KAAK,CAAC,SAAS,EAAE;QACb,IAAI,SAAS,EAAE;;;;YAIX,MAAM,QAAQ,GAAG,QAAQ,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,CAAC;YACnD,IAAI,QAAQ,KAAK,SAAS,EAAE;;;gBAGxB,MAAM,IAAI,KAAK,CAAC,kBAAkB,CAAC,CAAC;aACvC;YACD,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;SAC5B;QACD,OAAO,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KAClC;;IAED,GAAG,CAAC,UAAU,EAAE,MAAM,EAAE,OAAO,EAAE;QAC7B,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;YACjC,OAAO;SACV;QACD,MAAM,IAAI,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;QAC5D,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,EAAE,GAAG,GAAG,GAAG,UAAU,GAAG,GAAG,GAAG,MAAM,GAAG,GAAG,IAAI,OAAO,IAAI,EAAE,CAAC,CAAC,CAAC;QAC3F,QAAQ,UAAU;YACd,KAAK,KAAK;gBACN,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;gBACnC,MAAM;YACV,KAAK,MAAM;gBACP,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;gBAClC,MAAM;YACV,KAAK,MAAM;gBACP,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;gBAClC,MAAM;YACV,QAAQ;YACR,KAAK,MAAM,CAAC;YACZ,KAAK,MAAM;gBACP,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;SACxC;KACJ;IACD,OAAO,KAAK,CAAC,MAAM,EAAE,GAAG,IAAI,EAAE;QAC1B,MAAM,QAAQ,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;QACnC,OAAO,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;KACpD;IACD,KAAK,CAAC,MAAM,EAAE,GAAG,IAAI,EAAE;QACnB,IAAI,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,KAAK,EAAE;YAChC,OAAO;SACV;QACD,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACtD,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QACvB,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;KACjC;IACD,OAAO,IAAI,CAAC,MAAM,EAAE,GAAG,IAAI,EAAE;QACzB,MAAM,QAAQ,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;QACnC,OAAO,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;KACnD;IACD,IAAI,CAAC,MAAM,EAAE,GAAG,IAAI,EAAE;QAClB,IAAI,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,IAAI,EAAE;YAC/B,OAAO;SACV;QACD,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACtD,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QACxB,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;KACjC;IACD,OAAO,IAAI,CAAC,MAAM,EAAE,GAAG,IAAI,EAAE;QACzB,MAAM,QAAQ,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;QACnC,OAAO,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;KACnD;IACD,IAAI,CAAC,MAAM,EAAE,GAAG,IAAI,EAAE;QAClB,IAAI,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,IAAI,EAAE;YAC/B,OAAO;SACV;QACD,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACtD,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QACxB,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;KACjC;IACD,OAAO,OAAO,CAAC,MAAM,EAAE,GAAG,IAAI,EAAE;QAC5B,MAAM,QAAQ,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;QACnC,OAAO,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;KACtD;IACD,OAAO,CAAC,MAAM,EAAE,GAAG,IAAI,EAAE;QACrB,IAAI,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,OAAO,EAAE;YAClC,OAAO;SACV;QACD,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACtD,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QACxB,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;KACjC;IACD,OAAO,KAAK,CAAC,MAAM,EAAE,GAAG,IAAI,EAAE;QAC1B,MAAM,QAAQ,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;QACnC,OAAO,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;KACpD;IACD,KAAK,CAAC,MAAM,EAAE,GAAG,IAAI,EAAE;QACnB,IAAI,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,KAAK,EAAE;YAChC,OAAO;SACV;QACD,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACtD,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QACxB,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;KACjC;IACD,OAAO,SAAS,GAAG;QACf,MAAM,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;QACxB,MAAM,IAAI,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QAC7B,MAAM,GAAG,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;QAC9B,MAAM,GAAG,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;QAC9B,IAAI,QAAQ,GAAG,EAAE,CAAC;QAClB,QAAQ,IAAI,CAAC,IAAI,GAAG,EAAE,KAAK,GAAG,GAAG,IAAI,IAAI,IAAI,CAAC;QAC9C,QAAQ,IAAI,GAAG,CAAC;QAChB,QAAQ,IAAI,CAAC,GAAG,GAAG,EAAE,KAAK,GAAG,GAAG,GAAG,IAAI,GAAG,CAAC;QAC3C,QAAQ,IAAI,GAAG,CAAC;QAChB,QAAQ,IAAI,CAAC,GAAG,GAAG,EAAE,KAAK,GAAG,GAAG,GAAG,IAAI,GAAG,CAAC;QAC3C,OAAO,QAAQ,CAAC;KACnB;CACJ;AACD,AAAO,MAAM,YAAY,GAAG,IAAI,MAAM,EAAE,CAAC,AACzC,AACA,AAA4B,AAC5B,;;;;;;,;;,;;,;"}